SET SERVEROUTPUT ON

CURSOR CUR IS
  SELECT
      SYS_CONTEXT('USERENV', 'SESSION_USER')
      , C.TABLE_NAME
      , C.INDEX_NAME
      , CC.COLUMN_NAME
      , CC.POSITION
    FROM
      USER_CONSTRAINTS C
      , USER_CONS_COLUMNS CC
    WHERE
      C.OWNER = CC.OWNER
      AND C.CONSTRAINT_NAME = CC.CONSTRAINT_NAME
      AND C.TABLE_NAME = CC.TABLE_NAME
      AND C.TABLE_NAME LIKE 'SRC%'
      AND C.INDEX_NAME IS NOT NULL
    ORDER BY
      C.TABLE_NAME
      , C.INDEX_NAME
      , CC.POSITION
    ;

  V_STMT VARCHAR2(1000);

BEGIN
  FOR REC IN CUR LOOP
    DBMS_OUTPUT.PUT_LINE(V_STMT);
    V_STMT := 'ALTER INDEX ' || REC.INDEX_NAME || ' INVISIBLE';
    EXECUTE IMMEDIATE V_STMT;
  END LOOP;
END;
/

quit


 
